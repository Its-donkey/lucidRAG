@if (isOpen) {
  <!-- Backdrop -->
  <div
    class="fixed inset-0 z-50 flex items-center justify-center p-4"
    style="background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(4px)"
    (click)="close()"
  >
    <!-- Modal -->
    <div
      class="modal-content w-full max-w-lg rounded-2xl p-6 shadow-2xl"
      style="background-color: var(--color-surface-primary)"
      (click)="$event.stopPropagation()"
    >
      <!-- Header -->
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-bold" style="color: var(--color-text-primary)">
          Keyboard Shortcuts
        </h2>
        <button
          (click)="close()"
          class="btn btn-ghost p-2 rounded-lg"
          aria-label="Close"
        >
          <svg
            class="w-5 h-5"
            style="color: var(--color-text-secondary)"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>
      </div>

      <!-- Shortcuts List -->
      <div class="space-y-6">
        @for (category of ['navigation', 'actions', 'view']; track category) {
          @if (hasShortcuts(category)) {
            <div>
              <h3
                class="text-sm font-semibold uppercase tracking-wider mb-3"
                style="color: var(--color-text-tertiary)"
              >
                {{ getCategoryTitle(category) }}
              </h3>
              <div class="space-y-2">
                @for (
                  shortcut of shortcutsByCategory[category];
                  track shortcut.key
                ) {
                  <div
                    class="flex items-center justify-between py-2 px-3 rounded-lg"
                    style="background-color: var(--color-surface-secondary)"
                  >
                    <span
                      class="text-sm"
                      style="color: var(--color-text-primary)"
                    >
                      {{ shortcut.description }}
                    </span>
                    <kbd class="kbd">{{ formatShortcut(shortcut) }}</kbd>
                  </div>
                }
              </div>
            </div>
          }
        }

        <!-- Built-in shortcut -->
        <div>
          <h3
            class="text-sm font-semibold uppercase tracking-wider mb-3"
            style="color: var(--color-text-tertiary)"
          >
            General
          </h3>
          <div class="space-y-2">
            <div
              class="flex items-center justify-between py-2 px-3 rounded-lg"
              style="background-color: var(--color-surface-secondary)"
            >
              <span class="text-sm" style="color: var(--color-text-primary)">
                Show this help
              </span>
              <kbd class="kbd">Shift + ?</kbd>
            </div>
            <div
              class="flex items-center justify-between py-2 px-3 rounded-lg"
              style="background-color: var(--color-surface-secondary)"
            >
              <span class="text-sm" style="color: var(--color-text-primary)">
                Close modal / Blur input
              </span>
              <kbd class="kbd">Esc</kbd>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div
        class="mt-6 pt-4"
        style="border-top: 1px solid var(--color-border-primary)"
      >
        <p class="text-xs text-center" style="color: var(--color-text-tertiary)">
          Press <kbd class="kbd text-xs">Esc</kbd> to close
        </p>
      </div>
    </div>
  </div>
}
